(()=>{"use strict";$((function(){function e(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}function t(e){const t=e.replace(/\D/g,"");return t.length>=10&&/^[1-9]\d{9,14}$/.test(t)}"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{dragToClose:!1,closeClick:"outside"}),$(document).on("click",(function(e){const t=$(e.target);if(t.closest(".faq__item").length){const e=t.closest(".faq__item");e.toggleClass("active"),e.find(".faq__item-answer").slideToggle()}if(t.is(".product__add-to-cart")&&(t.toggleClass("in-cart"),t.hasClass("in-cart")?t.find("span").text("В корзине"):t.find("span").text("В корзину")),t.is(".form__password-visibility-btn")){const e=t,s=e.siblings('input[type="password"], input[type="text"]');"password"===s.attr("type")?(s.attr("type","text"),e.removeClass("icon-eye-off").addClass("icon-eye")):(s.attr("type","password"),e.removeClass("icon-eye").addClass("icon-eye-off"))}if(t.closest(".header__services-btn").length?($(".header__services-btn").toggleClass("active"),$(".header__services-content").toggleClass("visible"),$("body").toggleClass("lock-services")):t.closest(".header__services-content").length&&!t.is(".header__services-close")||($(".header__services-btn").removeClass("active"),$(".header__services-content").removeClass("visible"),$("body").removeClass("lock-services")),t.closest(".header__menu-toggler").length?($(".header__menu-toggler").toggleClass("active"),$(".menu").toggleClass("menu-open"),$("body").toggleClass("lock-menu")):t.closest(".menu__body").length||($(".header__menu-toggler").removeClass("active"),$(".menu").removeClass("menu-open"),$("body").removeClass("lock-menu")),t.closest(".product-card__tab").length){const e=t.closest(".product-card__tab"),s=e.closest(".swiper-wrapper"),n=s.find(".product-card__tab").index(e),o=e.closest(".product-card__info").find(".product-card__info-content").children().eq(n);s.find(".product-card__tab").removeClass("active"),e.addClass("active"),e.closest(".product-card__info").find(".product-card__info-block").removeClass("active"),o.addClass("active")}if(t.is(".calc__tab")){const e=t,s=e.closest(".calc__tabs"),n=s.find(".calc__tab").index(e),o=e.closest(".calc__container").find(".calc__content").find(".calc__block"),i=o.eq(n),a=e.text().trim();s.find(".calc__tab").removeClass("active"),e.addClass("active"),o.removeClass("active"),i.addClass("active"),e.closest(".calc__container").find(".calc__result-service").text(a.toLowerCase())}if(t.is(".person__accordion-title")){const e=t.closest(".person__accordion");e.toggleClass("active"),e.find(".person__accordion-content").slideToggle()}if(t.is(".products__category")){const e=t.closest(".products");e.find(".products__category").removeClass("active"),t.addClass("active");const s=t.closest(".nav-slider__item").index(),n=e.find(".products__content-block");n.removeClass("active"),n.eq(s).addClass("active")}})),$(".person__accordion.active").each((function(){$(this).find(".person__accordion-content").slideDown(0)})),$("form").each((function(){var s;(s=$(this)).on("submit",(function(n){let o=!0;s.find("[data-required]").each((function(){const s=$(this),n=s.attr("type"),i=s.attr("name");s.removeClass("_error"),s.closest(".select").length?s.closest(".select").removeClass("_error"):s.parent().removeClass("_error");const a=s.val()||"";s.is("select")&&""===a?(s.addClass("_error"),s.closest(".select").length&&s.closest(".select").addClass("_error"),o=!1):("checkbox"===n&&!s.is(":checked")||"phone"===i&&!t(a)||"email"===i&&!e(a)||""===a.trim())&&(s.addClass("_error"),o=!1)})),o||n.preventDefault()})),s.find("[data-required]").on("input change",(function(){const s=$(this),n=s.attr("type"),o=s.attr("name"),i=s.val()||"";s.is("select")?""!==i&&(s.removeClass("_error"),s.closest(".select").removeClass("_error")):"checkbox"===n?s.is(":checked")&&s.removeClass("_error"):"phone"===o?t(i)&&s.removeClass("_error"):"email"===o?e(i)&&s.removeClass("_error"):""!==i.trim()&&s.removeClass("_error")}))})),$(".quantity-block").each((function(){const e=$(this),t=e.find(".quantity-block__input"),s=e.find(".quantity-block__up"),n=e.find(".quantity-block__down");s.on("click",(function(){let e=parseInt(t.val())||0;e<999&&t.val(e+1)})),n.on("click",(function(){let e=parseInt(t.val())||0;e>1&&t.val(e-1)})),t.on("input",(function(){let e=t.val().replace(/\D/g,"");e=parseInt(e)||1,e<1&&(e=1),e>999&&(e=999),t.val(e)})),t.on("paste",(function(e){const t=e.originalEvent.clipboardData.getData("text");/\D/.test(t)&&e.preventDefault()}))})),$(".promo__banner").length&&new Swiper(".promo__banner",{slidesPerView:1,effect:"fade",fadeEffect:{crossFade:!0},navigation:{prevEl:".promo__prev",nextEl:".promo__next"},pagination:{el:".promo__pagination",clickable:!0}}),$(".products__content-block").length&&$(".products__content-block").each((function(){const e=$(this).find(".products__slider"),t=$(this).find(".products__prev"),s=$(this).find(".products__next");new Swiper(e[0],{slidesPerView:"auto",spaceBetween:10,navigation:{prevEl:t[0],nextEl:s[0]},breakpoints:{767.98:{spaceBetween:20}}})})),$(".blog__slider").length&&new Swiper(".blog__slider",{slidesPerView:"auto",spaceBetween:10,navigation:{prevEl:".blog__prev",nextEl:".blog__next"},breakpoints:{575.98:{slidesPerView:2,spaceBetween:20},991.98:{slidesPerView:3,spaceBetween:20},1199.98:{slidesPerView:4,spaceBetween:20}}}),$(".nav-slider").length&&$(".nav-slider").each((function(){const e=$(this),t=e.find(".nav-slider__item .label.active");let s=0;t.length&&(s=t.parent().index()),new Swiper(e[0],{slidesPerView:"auto",spaceBetween:5,initialSlide:s,breakpoints:{991.98:{spaceBetween:10}}})})),$(".clients__slider").length&&new Swiper(".clients__slider",{slidesPerView:1,spaceBetween:10,pagination:{el:".clients__pagination",clickable:!0}}),$(".services__content").length&&$(".services__content").each((function(){const e=$(this).find(".services__slider"),t=e.hasClass("services__slider--small"),s=$(this).find(".services__prev"),n=$(this).find(".services__next");new Swiper(e[0],{slidesPerView:"auto",spaceBetween:10,navigation:{prevEl:s[0],nextEl:n[0]},breakpoints:{767.98:{slidesPerView:t?4:2,spaceBetween:20},1399.98:{slidesPerView:t?6:3,spaceBetween:20}}})}));var s=document.querySelectorAll('input[type="tel"]'),n=function(e){return e.value.replace(/\D/g,"")},o=function(e){var t=e.target,s=n(t),o=e.clipboardData||window.clipboardData;if(o){var i=o.getData("Text");if(/\D/g.test(i))return void(t.value=s)}},i=function(e){var t=e.target,s=n(t),o=t.selectionStart,i="";if(!s)return t.value="";t.value.length==o?(s.length>11&&(s=s.substring(0,11)),i="+7 (",s.length>=2&&(i+=s.substring(1,4)),s.length>=5&&(i+=") "+s.substring(4,7)),s.length>=8&&(i+="-"+s.substring(7,9)),s.length>=10&&(i+="-"+s.substring(9,11)),t.value=i):e.data&&/\D/g.test(e.data)&&(t.value=s)},a=function(e){var t=e.target.value.replace(/\D/g,"");8==e.keyCode&&1==t.length&&(e.target.value="")};for(var l of s)l.addEventListener("focus",(function(){this.value||(this.value="+7 ")})),l.addEventListener("keydown",a),l.addEventListener("input",i,!1),l.addEventListener("paste",o,!1);class d{static openDropdown=null;constructor(e){this.$select=$(e),this.placeholder=this.$select.data("placeholder"),this.listCaption=this.$select.data("list-caption"),this.defaultText=this.getDefaultText(),this.selectName=this.$select.attr("name"),this.$options=this.$select.find("option"),this.$dropdown=null,this.initialState={},this.init()}init(){this.$select.length&&(this.saveInitialState(),this.$select.addClass("hidden"),this.renderDropdown(),this.setupEvents())}saveInitialState(){const e=this.$select.find("option:selected");this.initialState={selectedText:e.text(),selectedValue:e.val()}}getDefaultText(){const e=this.$select.find("option[selected]");return e.length?e.text():this.placeholder||this.$select.find("option:selected").text()}renderDropdown(){const e=`\n        <button type="button" class="dropdown__button icon-chevron-down" \n            aria-expanded="false" \n            aria-haspopup="true" \n            ${this.$select.is(":disabled")?"disabled":""}>\n            <span class="dropdown__button-text">${this.defaultText}</span>\n        </button>\n    `;this.$dropdown=$("<div>").addClass("dropdown");const t=this.listCaption?`<div class="dropdown__caption">${this.listCaption}</div>`:"";this.$dropdown.html(`\n        ${e}\n        <div class="dropdown__body" aria-hidden="true">\n           <div class="dropdown__content">\n               ${t}\n               <ul class="dropdown__list" role="listbox"></ul>\n           </div>\n        </div>\n    `);const s=this.$dropdown.find(".dropdown__list");this.$options.each(((e,t)=>{const n=$(t),o=n.val(),i=n.text(),a=n.is(":selected"),l=n.is(":disabled"),d=$("<li>").attr("role","option").data("value",o).attr("aria-checked",a).addClass("dropdown__list-item").text(i);a&&d.addClass("selected"),l&&(d.addClass("disabled"),d.attr("aria-disabled","true")),s.append(d)})),this.$select.before(this.$dropdown)}setupEvents(){this.$dropdown.find(".dropdown__button").on("click",(e=>{e.stopPropagation();const t=this.$dropdown.hasClass("visible");this.toggleDropdown(!t)})),this.$dropdown.on("click",".dropdown__list-item",(e=>{e.stopPropagation();const t=$(e.currentTarget);t.hasClass("disabled")||this.selectOption(t)})),$(document).on("click",(()=>this.closeDropdown())),$(document).on("keydown",(e=>{"Escape"===e.key&&this.closeDropdown()})),this.$select.closest("form").on("reset",(()=>this.restoreInitialState()))}toggleDropdown(e){e&&d.openDropdown&&d.openDropdown!==this&&d.openDropdown.closeDropdown();const t=this.$dropdown.find(".dropdown__body"),s=this.$dropdown.find(".dropdown__list"),n=s[0].scrollHeight>s[0].clientHeight;if(this.$dropdown.toggleClass("visible",e),this.$dropdown.find(".dropdown__button").attr("aria-expanded",e),t.attr("aria-hidden",!e),e){d.openDropdown=this,this.$dropdown.removeClass("dropdown-top");const e=t[0].getBoundingClientRect(),o=window.innerHeight;e.bottom>o&&this.$dropdown.addClass("dropdown-top"),s.toggleClass("has-scroll",n)}else d.openDropdown===this&&(d.openDropdown=null)}closeDropdown(){this.toggleDropdown(!1)}selectOption(e){const t=e.data("value"),s=e.text();this.$dropdown.find(".dropdown__list-item").removeClass("selected").attr("aria-checked","false"),e.addClass("selected").attr("aria-checked","true"),this.$dropdown.find(".dropdown__button").addClass("selected"),this.$dropdown.find(".dropdown__button-text").text(s),this.$select.val(t).trigger("change"),this.closeDropdown()}restoreInitialState(){if(void 0!==this.placeholder)this.$select.prop("selectedIndex",-1).trigger("change"),this.$dropdown.find(".dropdown__button-text").text(this.placeholder),this.$dropdown.find(".dropdown__button").removeClass("selected"),this.$dropdown.find(".dropdown__list-item").removeClass("selected").attr("aria-checked","false");else{const e=this.initialState;this.$select.val(e.selectedValue).trigger("change"),this.$dropdown.find(".dropdown__list-item").removeClass("selected").attr("aria-checked","false");const t=this.$dropdown.find(`.dropdown__list-item[data-value="${e.selectedValue}"]`);t.length&&t.addClass("selected").attr("aria-checked","true"),this.$dropdown.find(".dropdown__button-text").text(e.selectedText),this.$dropdown.find(".dropdown__button").addClass("selected")}}syncSelectedOption(){const e=this.$select.find("option:selected"),t=e.val(),s=e.text();this.$dropdown.find(".dropdown__list-item").removeClass("selected").attr("aria-checked","false"),this.$dropdown.find(`.dropdown__list-item[data-value="${t}"]`).addClass("selected").attr("aria-checked","true"),this.$dropdown.find(".dropdown__button-text").text(s)}}$(".select").each(((e,t)=>{const s=$(t).find("select");s.length&&new d(s[0])}));const r=$(".range");r.length>0&&r.each((function(){const e=$(this).find(".range__slider")[0],t=$(this).find(".range__control--start"),s=$(this).find(".range__control--end"),n=[t,s],o=$(this).closest("form"),i=o.find('button[type="reset"]'),a=$(`button[type="reset"][form="${o.attr("id")}"]`),l=$.merge(i,a),d=parseInt(t.attr("min")),r=parseInt(s.attr("max"))||1e6,c=Math.round(.05*(r-d));function p(e){return parseInt(e.replace(/\s/g,""))}function h(e){const t=parseInt(e.attr("maxlength")),s=t-Math.floor((t-1)/4);e.attr("maxlength",s)}function _(e){const t=$(e),s=t.siblings(".range__unit");if(0===s.length)return;const n=window.getComputedStyle(e),o=function(e,t){const s=document.createElement("span"),n=window.getComputedStyle(t);s.style.position="absolute",s.style.visibility="hidden",s.style.whiteSpace="nowrap",s.style.font=n.font,s.style.letterSpacing=n.letterSpacing,s.textContent=String(e||""),document.body.appendChild(s);const o=s.offsetWidth;return document.body.removeChild(s),o}(t.val(),e),i=parseFloat(n.paddingLeft)||0,a=parseFloat(n.paddingRight)||0,l=e.clientWidth,d=i,r=s.last(),c=d+o+4,p=l-a-r.outerWidth(),h=Math.min(c,p);r.css("left",h+"px");const _=s.first(),u=_.outerWidth(),v=Math.max(0,i-u-4);_.css("left",v+"px"),s.addClass("ready")}h(t),h(s),t.val(t.val()),s.val(s.val()),noUiSlider.create(e,{start:[p(t.val()),p(s.val())],connect:!0,margin:c,range:{min:[d],max:[r]}}),e.noUiSlider.on("update",(function(e,t){n[t].val(Math.round(e[t])),_(n[t][0])})),$.each(n,(function(t,s){$(s).on("change",(function(s){((t,s)=>{let n=[null,null];n[t]=p(s),e.noUiSlider.set(n)})(t,$(this).val())})),$(s).on("input",(function(e){let t=$(this).val();t=t.replace(/[^\d]/g,""),$(this).val(t),$(this).addClass("active")})),$(s).on("input change",(function(){_(this)})),_(s[0])}));const u=new ResizeObserver((()=>{_(t[0]),_(s[0])}));u.observe(t[0]),u.observe(s[0]),l.length>0&&l.on("click",(function(){setTimeout((function(){t.val(t[0].defaultValue),s.val(s[0].defaultValue),e.noUiSlider.set([p(t[0].defaultValue),p(s[0].defaultValue)])}),0)}))}));var c=$(".arrow-top");function p(e){$(".cart__payment-block").hide(),$(`#payment_${e}`).show()}c.length&&($(window).on("scroll",(function(){$(window).scrollTop()>$(window).height()?c.addClass("visible"):c.removeClass("visible")})),c.on("click",(function(e){e.preventDefault(),$("html, body").animate({scrollTop:0},300)}))),$('input[name="payment"]').on("change",(function(){p($(this).val())}));const h=$('input[name="payment"]:checked');h.length&&p(h.val())}))})();